<% provide(:title, 'Candidatos') %>
<div class="row">
  <aside class="col-md-4">
    <h3>Candidatos</h3>
  </aside>
</div>
<div class="row">
  <aside class="col-md-3">
    <%= form_for index_candidate_path, method: 'get' do |f| %>
        <%= text_field_tag :search, params[:search], placeholder: 'Pesquisa' %>
    <% end %>
  </aside>

  <aside class="col-md-3">
    <%= form_for index_candidate_path, method: 'get' do |f| %>
        <% field_array = @users.distinct.pluck(:prof_area) %>
        <%= f.select(:field, options_for_select(field_array),{}, :onChange => "javascript: this.form.submit();") %>

    <% end %>
  </aside>
  <aside class="col-md-3">
    <%= form_for index_candidate_path, method: 'get' do |f| %>
        <% field_array = @users.distinct.pluck(:prof_situation) %>
        <%= f.select(:situation, options_for_select(field_array),{}, :onChange => "javascript: this.form.submit();") %>

    <% end %>
  </aside>
  <aside class="col-md-3">
    <%= form_for index_candidate_path, method: 'get' do |f| %>
        <% field_array = @users.distinct.pluck(:locality) %>
        <%= f.select(:locality, options_for_select(field_array),{}, :onChange => "javascript: this.form.submit();") %>

    <% end %>
  </aside>
</div>
<div class="row">
  <% @users.each do |user|  %>
      <div class="col-md-6">
        <%= render user %>
        <% if admin_user?(current_user)  %>
            <%= link_to "Editar", edit_user_path(user,data: 'edit'), class: 'btn btn-default' %>
        <% end %>
      </div>
  <% end %>
</div>
<%= will_paginate %>

<div class="row">
  <% unless logged_in? %>
      <%= link_to "Quero-me registar", new_user_path %>
  <% end %>
</div>